webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("qRXP"),i=a("kfHR"),l=a.n(i),s={data:function(){return{tableData:l()({length:10},function(){return{date:"2016-05-03",name:"王小虎",zip:200333}}),validateMsgTooltip:!1}},methods:{dateValidator:function(t,e){t.date?e():e("请选择日期")},nameValidator:function(t,e){t.name?e():e("请填写姓名")},handleCheckData:function(){console.log(this.tableData)},getNewRowData:function(){return{date:"",name:"",zip:""}},handleEdit:function(t){this.$refs.elTableEditabled.editRows([t])},handleCanelRow:function(t){this.$refs.elTableEditabled.cancelRows([t])},handleInsertRowsBefore:function(){if(!this.selection||!this.selection[0])return this.$message.error("请先选择一行");this.$refs.elTableEditabled.insertRowsBeforeRow(this.selection[0],[this.getNewRowData()])},handleInsertRowsAfter:function(){if(!this.selection||!this.selection[0])return this.$message.error("请先选择一行");this.$refs.elTableEditabled.insertRowsAfterRow(this.selection[0],[this.getNewRowData()])},handleSave:function(t){var e=this;this.$refs.elTableEditabled.validateRows([t],function(a){a&&e.$refs.elTableEditabled.cancelRows([t],!1)})},handleNewRows:function(){var t=this.getNewRowData();this.$refs.elTableEditabled.newRows([t])},handleDelRows:function(){this.$refs.elTableEditabled.delRows(this.selection)},handleValidate:function(){this.$refs.elTableEditabled.validate(function(t){console.log(t)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"12px"}},[a("el-button",{on:{click:t.handleValidate}},[t._v("表格验证")]),t._v(" "),a("el-button",{on:{click:t.handleNewRows}},[t._v("新增行")]),t._v(" "),a("el-button",{on:{click:t.handleInsertRowsBefore}},[t._v("插入行（前）")]),t._v(" "),a("el-button",{on:{click:t.handleInsertRowsAfter}},[t._v("插入行（后）")]),t._v(" "),a("el-button",{on:{click:t.handleDelRows}},[t._v("删除行")]),t._v(" "),a("el-button",{on:{click:t.handleCheckData}},[t._v("打印编辑后的表格数据")]),t._v(" "),a("el-button",{on:{click:function(e){t.validateMsgTooltip=!t.validateMsgTooltip}}},[t._v(t._s(t.validateMsgTooltip?"关闭":"开启")+"验证提示使用tooltip")])],1),t._v(" "),a("el-table-editabled",{ref:"elTableEditabled",attrs:{columns:["date","name"],"validate-msg-tooltip":t.validateMsgTooltip},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"500"},on:{"selection-change":function(e){t.selection=arguments[0]}}},[a("el-table-column",{attrs:{type:"index",fixed:"",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"date",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-table-editabled-cell",{attrs:{row:n,prop:"date",validator:t.dateValidator},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.rowStates,l=e.validateOwn;return[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!rowStates.editing"}]},[t._v(t._s(n.date))]),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"rowStates.editing"}],attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",clearable:""},on:{change:l},model:{value:n.date,callback:function(e){t.$set(n,"date",e)},expression:"row.date"}})]}}])})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-table-editabled-cell",{attrs:{row:n,prop:"name",validator:t.nameValidator},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.rowStates,l=e.validateOwn;return[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!rowStates.editing"}]},[t._v(t._s(n.name))]),t._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"rowStates.editing"}],attrs:{clearable:""},on:{blur:l},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"row.name"}})]}}])})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"zip",label:"邮编"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-table-editabled-cell",{attrs:{row:n},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.rowStates;return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!rowStates.editing"}],attrs:{type:"text",size:"small"},on:{click:function(e){t.handleEdit(n)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"rowStates.editing"}]},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.handleCanelRow(n)}}},[t._v("\n                  取消\n                ")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.handleSave(n)}}},[t._v("\n                  保存\n                ")])],1)]}}])})]}}])})],1)],1)],1)},staticRenderFns:[]},r=a("C7Lr")(s,o,!1,null,null,null).exports,d=a("4DWU"),c=a.n(d),u=(a("epTE"),a("HeSG"));n.default.use(u.a),n.default.use(c.a,{size:"small"}),n.default.config.productionTip=!1,new n.default({el:"#app",components:{App:r},template:"<App/>"})},epTE:function(t,e){},jkA0:function(t,e){},mQ9N:function(t,e,a){"use strict";var n=a("lC5x"),i=a.n(n),l=a("rVsN"),s=a.n(l),o=a("J0Oq"),r=a.n(o),d=a("IHPB"),c=a.n(d),u=a("aA9S"),h=a.n(u),f=a("cUn4"),v=a.n(f),w=a("draA"),b=a("THd/"),p=a("qRXP"),m={name:"ElTableEditabled",provide:function(){return{editValidator:this}},model:{prop:"tableData",event:"table-data-change"},props:{tableData:{type:Array,default:w.b},columns:{type:Array,default:w.b},rowStates:{type:Function,default:function(){return{}}},cellStates:{type:Object,default:function(){return{default:function(){return{}}}}},defaultEditing:{type:Boolean,default:!1},validateMsgTooltip:{type:Boolean,default:!1}},data:function(){return{store:new v.a}},watch:{tableData:{immediate:!0,handler:function(t,e){this.byOwnerAction||this.init(),this.byOwnerAction=!1}}},methods:{init:function(){var t=this;this.tableCacheData=new v.a;var e={};this.columns.forEach(function(a){var n=t.cellStates[a];e[a]=function(e){return new p.default({data:h()({editing:t.defaultEditing,validateMsg:"",hovering:!1},n&&n(e))})}}),this.store=new b.a({tableData:this.tableData,columns:this.columns,rowStatesCreator:function(e){return new p.default({data:h()({editing:t.defaultEditing},t.rowStates(e))})},cellStatesCreator:e,onInitLoop:function(e){t.updateTableCache([e],"add")}})},editRows:function(t){this.store.setRowsStates(t,{editing:!0})},updateTableCache:function(t,e){var a=this.tableCacheData;t.forEach(function(t){"add"===e&&!a.has(t)||"update"===e?a.set(t,Object(w.a)(t)):"delete"===e&&a.delete(t)})},cancelRows:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.tableCacheData,i=this.store;t.forEach(function(t){var l=n.get(t);a&&l?h()(t,l):e.updateTableCache([t],"update"),i.setRowsStates([t],{editing:!1}),i.setCellStates([t],e.columns,{editing:!1,validateMsg:""})})},editColumns:function(t,e){this.store.setCellStates(t,e,{editing:!0})},delRows:function(t){this.byOwnerAction=!0,this.updateTableCache(t,"delete"),this.$emit("table-data-change",this.tableData.filter(function(e){return!t.includes(e)})),this.store.delStates(t)},newRows:function(t){var e;this.byOwnerAction=!0,this.updateTableCache(t,"add"),this.store.addStates(t),(e=this.tableData).splice.apply(e,[0,0].concat(c()(t))),this.editRows(t)},insertRowsBeforeRow:function(t,e){this.insertRows(t,e,"before")},insertRowsAfterRow:function(t,e){this.insertRows(t,e,"after")},insertRows:function(t,e,a){var n=this;this.byOwnerAction=!0,this.store.addStates(e),this.updateTableCache(e,"add"),this.tableData.find(function(i,l){var s;if(t===i)return(s=n.tableData).splice.apply(s,["before"===a?l:l+1,0].concat(c()(e))),!0}),this.editRows(e)},validateRows:function(t,e){var a=this;return r()(i.a.mark(function n(){var l,o,r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=[],a.$$ElTableEditabled.$emit("edit-validator:validate",l,t),o=[],r=void 0,l.forEach(function(t){o.push(new s.a(function(e,a){t().then(function(t){t?a():e()})}))}),n.prev=5,n.next=8,s.a.all(o);case 8:r=!0,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),r=!1;case 14:e(r);case 15:case"end":return n.stop()}},n,a,[[5,11]])}))()},validate:function(t){this.validateRows(null,t)}}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-table-editabled"},[this._t("default")],2)},staticRenderFns:[]},S=a("C7Lr")(m,g,!1,null,null,null);e.a=S.exports},mdZo:function(t,e,a){"use strict";var n=a("rVsN"),i=a.n(n),l=(a("draA"),{name:"ElTableEditabledCell",inject:["editValidator"],props:{prop:String,validator:Function,row:null},computed:{rowStates:function(){return this.cellStates._states},cellStates:function(){return this.editValidator.store.getStates(this.row)},ownStates:function(){return this.cellStates&&this.prop?this.cellStates[this.prop]:{}}},created:function(){this.$$ElTableEditabled.$on("edit-validator:validate",this.handleValidate)},beforeDestroy:function(){this.$$ElTableEditabled.$off("edit-validator:validate",this.handleValidate)},methods:{handleValidate:function(t,e){!this.ownStates.editing&&!this.rowStates.editing||!this.validator||e&&!e.includes(this.row)||t.push(this.validateOwn)},validateOwn:function(){var t=this,e=this.validator,a=this.ownStates,n=this.rowStates;return new i.a(function(i){e(t.row,function(t){(a.editing||n.editing)&&(a.validateMsg=t,i(t))},t.rowStates,t.cellStates)})}}}),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-table-editabled-cell",class:{"is-validate-error":!!t.ownStates.validateMsg},on:{mouseenter:function(){return t.ownStates.hovering=!0},mouseleave:function(){return t.ownStates.hovering=!1}}},[a("el-tooltip",{attrs:{disabled:!t.editValidator.validateMsgTooltip,value:!!t.ownStates.validateMsg&&t.ownStates.hovering,"popper-class":"el-table-editabled-cell-validate-msg",effect:"light",content:t.ownStates.validateMsg,placement:"top-start",manual:""}},[a("div",{staticClass:"el-table-editabled-cell__content"},[t._t("default",null,{cellStates:t.cellStates,rowStates:t.rowStates,validateOwn:t.validateOwn})],2)]),t._v(" "),t.editValidator.validateMsgTooltip?t._e():a("div",{directives:[{name:"show",rawName:"v-show",value:!!t.ownStates.validateMsg,expression:"!!ownStates.validateMsg"}],staticClass:"el-table-editabled-cell__error-msg"},[t._v("\n    "+t._s(t.ownStates.validateMsg)+"\n  ")])],1)},staticRenderFns:[]};var o=a("C7Lr")(l,s,!1,function(t){a("jkA0")},null,null);e.a=o.exports}},["NHnr"]);
//# sourceMappingURL=app.89623e75ea64dad276cd.js.map